## ERC721 Manual - Setup Steps

. [Ethereum] Owner registers ERC721
. [SKALE Chain] Owner deploys clone
. [SKALE Chain] Owner assigns clone minter
. [SKALE Chain] Owner registers clone

## ERC721 Transfer Flow

Deposit

. [Ethereum] User Approves ERC721 transfer
. [Ethereum] User deposits ERC721 to DepositBox
. [SKALE Chain] User can now transfer clone

Withdrawal

. [Ethereum] User funds CommunityPool ETH for exit
. [SKALE Chain] User exits from TokenManager
. [Ethereum] User can now transfer ERC721

.ERC721/1155 Setup Flow with Manual Mapping

ifdef::env-github[image::https://www.plantuml.com/plantuml/svg/ZL6zJiCm4Dxz53SXy0221ObMg4tQYLP81OdPr2VdLETisGub8hmxnicI0GblzzttuxjRnQH2wbehbZ7r5X-5EYRweDHlI9cWMlWIa5-bZYSJNCUwTjO5U6ieOUdiY774Afj96ViMovl9RDYc1WDsxI1AaFZryB1NtXERed-GyldC6E20XcB2446Zjwv73Tj3VNztAsKXRj2xIAbodoDSm6kbzLY-kXDorHUlowj5wGulJ-lT5kf64G_pj4t9Y5D4RHtZb7Ecr41BdE02thl0Yxbm7ICPdWbXdzaOf5pyCT7aNBwuLwmCXd_DWAoXR2nlptcnodK-rGy0[]]
ifndef::env-github[]

[plantuml]
....
@startuml
<style>
activityDiagram {
    BackgroundColor White
    LineColor Black
  }
</style>
|Ethereum|
start
group Mapping
    :**Owner Registers deployed ERC721**
    DepositBoxERC721
    .addERC721TokenByOwner();
    |SKALE Chain|
    :**Owner Deploys ERC721Clone**
    with mint & burn;
    :**Owner Assigns ERC721Clone Minter**;
    :**Owner Registers**
    TokenManagerERC721
    .addERC721TokenByOwner();
end group
stop
@enduml
....

include::partial$erc721-1155-transfer-flow.adoc[]

endif::[]


## ERC721 Automatic - Setup Steps

. [SKALE Chain] Owner sets Autodeploy Mapping
. [Ethereum] Owner sets whitelist

## ERC721 Transfer Flow

Deposit

. [Ethereum] User Approves ERC721 transfer
. [Ethereum] User deposits ERC721 to DepositBox
. [SKALE Chain] User can now transfer clone

Withdrawal

. [Ethereum] User funds CommunityPool ETH for exit
. [SKALE Chain] User exits from TokenManager
. [Ethereum] User can now transfer ERC721

.ERC721 Setup Flow with Automatic Mapping

ifdef::env-github[image::https://www.plantuml.com/plantuml/svg/PKzDJyCm3BtdL-GuUYY22n9CQ5lN4vkG06bdqrgjjJI94eTHKVuxgHdI97AAtyTxzYeo14w3KSl8ey571GtJ1_6u9UW23FfBwVmsq1oxu99jAsTSq8UU68NPaSLVR6EoA6FVQdbz3fjgxZ5W6YOrkxtUW_TaEt5Ehq_hNQsh7iXEWiWoyhilYkUJnQ0ZSjIGsBNeZHkBGkWtTqIx1miTXlgbkhkz4RX42-y6rra-05Ep5S_Ywa7OYsN-LvpcWmn5FZTagul46_TvcTzId0iEV-95MPOv7MshvJuLsNcrodCQp0y0[]]
ifndef::env-github[]

[plantuml]
....
@startuml
<style>
activityDiagram {
    BackgroundColor White
    LineColor Black
  }
</style>
|Ethereum|
group Mapping
    |SKALE Chain|
    start
    :**Owner sets autodeploy**
    TokenManagerERC721
    .enableAutomaticDeploy();
    |Ethereum|
    :**Owner sets whitelist**
    DepositBoxERC721
    .disableWhitelist(...);
end group
stop
@enduml
....

endif::[]

include::partial$erc721-1155-transfer-flow.adoc[]

## ERC1155 Automatic Setup Steps

. [SKALE Chain] Owner sets Autodeploy Mapping
. [Ethereum] Owner sets whitelist

## ERC1155 Transfer Flow

Deposit

. [Ethereum] User Approves ERC1155 transfer
. [Ethereum] User deposits ERC1155 to DepositBox
. [SKALE Chain] User can now transfer clone

Withdrawal

. [Ethereum] User funds CommunityPool ETH for exit
. [SKALE Chain] User exits from TokenManager
. [Ethereum] User can now transfer ERC1155

.ERC1155 Flow with Automatic Mapping

ifdef::env-github[image::https://www.plantuml.com/plantuml/svg/PKyzJyCm4DtzApoM344Tka25sgIPQ8K4I9sFv9ISwjYHVQP4XF-ESnG9L4--zt7ltYOmU8wzKUl0ey471JNJE_6u8sWzzFfJwVGAg4-jTz4sfJFEwsD7ZCBioU8FLfWaIjYNMjzUbaqLT-WnzfEQtOC-m32GRSKvlJnkzvKkEo0x2IB7oEykovxE5hqEo453PDVWODoOPKA_kXFQ0rXeqLVFvNAvMWcUeuKtWzkaxu6ftebfSNClx9zhhZFESoD3WIyHoUe2SU4-_WKq5EQ4uwzwaUTvMe-sqT9G1NQ3sgGvzkOR[]]
ifndef::env-github[]

[plantuml]
....
@startuml
<style>
activityDiagram {
    BackgroundColor White
    LineColor Black
  }
</style>
|Ethereum|
group Mapping
    |SKALE Chain|
    start
    :**Owner sets autodeploy**
    TokenManagerERC1155
    .enableAutomaticDeploy();
    |Ethereum|
    :**Owner sets whitelist**
    DepositBoxERC1155
    .disableWhitelist(...);
end group
stop
@enduml
....

endif::[]

include::partial$erc721-1155-transfer-flow.adoc[]